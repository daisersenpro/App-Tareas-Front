<div class="container mt-4">
  <div class="bg-white p-4 shadow rounded">
    <h2 class="mb-4 text-center">Lista de Tareas</h2>

    <!-- 
      Formulario para agregar una nueva tarea.
      (ngSubmit)="agregarTarea()" indica que al enviar el formulario se ejecuta la función agregarTarea() del componente TypeScript.
      #formTarea="ngForm" crea una referencia local al formulario para poder validar si es válido o no.
    -->
    <form class="row g-3 mb-3" (ngSubmit)="agregarTarea()" #formTarea="ngForm">
      <div class="col-auto">
        <!-- 
          Input de texto para escribir el título de la nueva tarea.
          [(ngModel)]="nuevoTitulo" es un ENLACE BIDIRECCIONAL: 
          - Si el usuario escribe en el input, la variable nuevoTitulo en el componente se actualiza automáticamente.
          - Si la variable nuevoTitulo cambia en el componente, el input también se actualiza.
        -->
        <input
          type="text"
          name="titulo"
          [(ngModel)]="nuevoTitulo"
          placeholder="Nueva tarea"
          required
          class="form-control"
        />
      </div>
      <div class="col-auto">
        <!-- 
          Botón para agregar la tarea.
          [disabled]="formTarea.invalid" desactiva el botón si el formulario no es válido (por ejemplo, si el input está vacío).
        -->
        <button type="submit" [disabled]="formTarea.invalid" class="btn btn-primary">
          <!-- Icono de Bootstrap Icons para mejorar el aspecto visual -->
          <i class="bi bi-plus-circle"></i> Agregar
        </button>
      </div>
    </form>

    <!-- 
      Mensaje que se muestra solo mientras se están cargando las tareas desde el backend.
      *ngIf="cargando" significa que este div solo aparece si la variable cargando es true.
    -->
    <div *ngIf="cargando" class="alert alert-info">Cargando tareas...</div>

    <!-- 
      Lista de tareas.
      *ngIf="!cargando" significa que la lista solo se muestra cuando ya terminaron de cargarse las tareas.
    -->
    <ul class="list-group" *ngIf="!cargando">
      <!-- 
        *ngFor="let tarea of tareas" recorre el array tareas y crea un <li> por cada tarea.
        Así se muestra cada tarea que existe en la base de datos.
      -->
      <li *ngFor="let tarea of tareas" class="list-group-item d-flex justify-content-between align-items-center">
        <span>
          <!-- 
            {{ tarea.titulo }} muestra el título de la tarea.
            Es una expresión de Angular que inserta el valor de la propiedad titulo de cada tarea.
          -->
          {{ tarea.titulo }}
          <!-- 
            Si la tarea está completada, muestra una insignia verde con el texto "Completada" y un icono.
            *ngIf="tarea.completada" significa que este span solo aparece si la tarea está marcada como completada.
          -->
          <span *ngIf="tarea.completada" class="badge bg-success ms-2">
            <i class="bi bi-check-circle"></i> Completada
          </span>
        </span>
        <span>
          <!-- 
            Botón para marcar la tarea como completada.
            Solo aparece si la tarea NO está completada (*ngIf="!tarea.completada").
            Al hacer clic, ejecuta la función marcarComoCompletada(tarea) del componente.
          -->
          <button
            *ngIf="!tarea.completada"
            (click)="marcarComoCompletada(tarea)"
            type="button"
            class="btn btn-success btn-sm me-2"
          >
            <i class="bi bi-check-circle"></i> Completar
          </button>
          <!-- 
            Botón para eliminar la tarea.
            Al hacer clic, ejecuta la función eliminarTarea(tarea) del componente.
          -->
          <button
            (click)="eliminarTarea(tarea)"
            type="button"
            class="btn btn-danger btn-sm"
          >
            <i class="bi bi-trash"></i> Eliminar
          </button>
        </span>
      </li>
    </ul>
  </div>
</div>